import React, { useState } from "react";
import "./mainNav.scss";
// import { Link } from "react-router-dom";
import { Link, NavLink } from "react-router-dom";
import Logo from "../../assets/logos/logo-we-love-school.png";
import { useTranslation } from "react-i18next";

const MainNav = () => {
  const [open, setOpen] = useState(true);
  const [open2, setOpen2] = useState(false);

  const [openIndex, setOpenIndex] = useState(null);

  const toggleItem = (index) => {
    if (openIndex === index) {
      setOpenIndex(null);
    } else {
      setOpenIndex(index);
    }
  };

  const { t, i18n } = useTranslation("common");

  const changeLanguage = (lng) => {
    localStorage.setItem("i18nextLng", lng);
    i18n.changeLanguage(lng);
  };

  // consolog localstorage
  const dataUser = localStorage.getItem("dataUser");


  return (
    <nav className="mainNav">
      <div className="mainNav__wrapper">
        <NavLink
          to="/"
          className="mainNav__logo"
          onClick={() => window.scrollTo({ top: 0, behavior: "smooth" })}
        >
          <img src={Logo} alt="" />
        </NavLink>
        <div className="mainNav__links">
          <NavLink to="/" className="mainNav__linkItem">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              fill="none"
              viewBox="0 0 24 24"
            >
              <path
                fill="#666"
                d="M11.47 3.841a.75.75 0 011.06 0l8.69 8.69a.751.751 0 101.06-1.061l-8.69-8.69a2.25 2.25 0 00-3.181 0l-8.69 8.69a.75.75 0 101.06 1.06l8.69-8.689z"
              ></path>
              <path
                fill="#666"
                d="M12 5.432l8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 01-.75-.75v-4.5a.75.75 0 00-.75-.75h-3a.75.75 0 00-.75.75V21a.75.75 0 01-.75.75H5.625a1.875 1.875 0 01-1.875-1.875v-6.198c.031-.028.061-.056.091-.086L12 5.432z"
              ></path>
            </svg>
            <p>{t("my_school")}</p>
          </NavLink>
          <NavLink to="/search" className="mainNav__linkItem">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              fill="none"
              viewBox="0 0 24 24"
            >
              <path
                fill="#666"
                d="M8.25 10.872c0-.333.068-.662.2-.97a2.53 2.53 0 01.569-.822c.244-.235.533-.422.851-.55a2.707 2.707 0 012.01 0c.318.128.607.315.851.55.244.235.437.515.57.822.131.308.199.637.199.97a2.49 2.49 0 01-.769 1.792 2.674 2.674 0 01-1.856.742 2.674 2.674 0 01-1.856-.742 2.49 2.49 0 01-.769-1.792z"
              ></path>
              <path
                fill="#666"
                fillRule="evenodd"
                d="M12 2.547c-5.385 0-9.75 4.213-9.75 9.41 0 5.199 4.365 9.412 9.75 9.412s9.75-4.213 9.75-9.411c0-5.198-4.365-9.411-9.75-9.411zM10.875 6.89c-.646 0-1.284.147-1.86.429a4.091 4.091 0 00-1.46 1.192 3.91 3.91 0 00-.747 1.7 3.85 3.85 0 00.129 1.842c.191.596.526 1.14.975 1.588.45.449 1.002.789 1.613.993.611.204 1.263.267 1.903.184a4.214 4.214 0 001.785-.665l2.007 1.936a.751.751 0 00.535.23.774.774 0 00.544-.212.72.72 0 00.22-.524.703.703 0 00-.239-.517l-2.006-1.937a3.867 3.867 0 00.253-4.11 4.045 4.045 0 00-1.52-1.556 4.238 4.238 0 00-2.132-.573z"
                clipRule="evenodd"
              ></path>
            </svg>
            <p>{t("search_school")}</p>
          </NavLink>
          <NavLink to="/news" className="mainNav__linkItem">
            <svg
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M1.5 7.125C1.5 6.089 2.34 5.25 3.375 5.25H9.375C10.411 5.25 11.25 6.09 11.25 7.125V10.875C11.25 11.911 10.41 12.75 9.375 12.75H3.375C2.87772 12.75 2.40081 12.5525 2.04917 12.2008C1.69754 11.8492 1.5 11.3723 1.5 10.875V7.125ZM13.5 8.625C13.5 7.589 14.34 6.75 15.375 6.75H20.625C21.66 6.75 22.5 7.59 22.5 8.625V16.875C22.5 17.91 21.66 18.75 20.625 18.75H15.375C14.8777 18.75 14.4008 18.5525 14.0492 18.2008C13.6975 17.8492 13.5 17.3723 13.5 16.875V8.625ZM3 16.125C3 15.089 3.84 14.25 4.875 14.25H10.125C11.161 14.25 12 15.09 12 16.125V18.375C12 19.41 11.16 20.25 10.125 20.25H4.875C4.37772 20.25 3.90081 20.0525 3.54917 19.7008C3.19754 19.3492 3 18.8723 3 18.375V16.125Z"
                fill="#666666"
              />
            </svg>
            <p>{t("news")}</p>
          </NavLink>

          <NavLink to="/events" className="mainNav__linkItem">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="21"
              height="21"
              fill="none"
              viewBox="0 0 21 21"
            >
              <path
                fill="#666"
                fillRule="evenodd"
                d="M4.846.34c.214 0 .42.082.571.228a.766.766 0 01.237.551v1.56h9.692v-1.56c0-.206.085-.405.237-.55a.823.823 0 01.57-.23c.215 0 .42.083.572.23a.766.766 0 01.236.55v1.56h.808a3.29 3.29 0 012.285.913c.606.585.946 1.378.946 2.205v11.695c0 .827-.34 1.62-.946 2.205a3.29 3.29 0 01-2.285.913H3.231a3.29 3.29 0 01-2.285-.913A3.064 3.064 0 010 17.492V5.797c0-.827.34-1.62.946-2.205a3.29 3.29 0 012.285-.913h.807v-1.56c0-.206.086-.405.237-.55a.823.823 0 01.571-.23zm14.539 9.355c0-.413-.17-.81-.474-1.102a1.645 1.645 0 00-1.142-.457H3.231c-.429 0-.84.164-1.142.457a1.532 1.532 0 00-.474 1.102v7.797c0 .413.17.81.474 1.102.302.293.713.457 1.142.457h14.538c.429 0 .84-.164 1.143-.457.302-.292.473-.689.473-1.102V9.695z"
                clipRule="evenodd"
              ></path>
            </svg>
            <p>{t("events")}</p>
          </NavLink>
          <NavLink to="/mission" className="mainNav__linkItem">
            <svg
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M9.315 7.584C12.195 3.883 16.695 1.5 21.75 1.5C21.9489 1.5 22.1397 1.57902 22.2803 1.71967C22.421 1.86032 22.5 2.05109 22.5 2.25C22.5 7.306 20.117 11.805 16.416 14.686C16.5699 15.6502 16.5128 16.6364 16.2486 17.5764C15.9844 18.5164 15.5194 19.388 14.8857 20.1308C14.2519 20.8737 13.4646 21.4702 12.5779 21.8792C11.6913 22.2883 10.7264 22.5001 9.75 22.5C9.55109 22.5 9.36032 22.421 9.21967 22.2803C9.07902 22.1397 9 21.9489 9 21.75V17.619C8.02793 16.8514 7.14925 15.9724 6.382 15H2.25C2.05109 15 1.86032 14.921 1.71967 14.7803C1.57902 14.6397 1.5 14.4489 1.5 14.25C1.49992 13.2735 1.71173 12.3085 2.12082 11.4218C2.52991 10.5351 3.12653 9.74765 3.86951 9.11391C4.61249 8.48017 5.48413 8.01519 6.42427 7.75105C7.36442 7.48692 8.35068 7.42992 9.315 7.584ZM15 6.75C14.4033 6.75 13.831 6.98705 13.409 7.40901C12.9871 7.83097 12.75 8.40326 12.75 9C12.75 9.59674 12.9871 10.169 13.409 10.591C13.831 11.0129 14.4033 11.25 15 11.25C15.5967 11.25 16.169 11.0129 16.591 10.591C17.0129 10.169 17.25 9.59674 17.25 9C17.25 8.40326 17.0129 7.83097 16.591 7.40901C16.169 6.98705 15.5967 6.75 15 6.75Z"
                fill="#666666"
              />
              <path
                d="M5.26077 17.2419C5.33976 17.183 5.40637 17.1092 5.45681 17.0245C5.50725 16.9399 5.54052 16.8461 5.55473 16.7486C5.56894 16.6511 5.5638 16.5518 5.53962 16.4563C5.51543 16.3607 5.47267 16.2709 5.41377 16.1919C5.35487 16.1129 5.28099 16.0463 5.19635 15.9959C5.11171 15.9455 5.01796 15.9122 4.92046 15.898C4.82295 15.8838 4.72361 15.8889 4.62809 15.9131C4.53258 15.9373 4.44276 15.98 4.36377 16.0389C3.59666 16.6096 3.00018 17.3791 2.63885 18.2642C2.27753 19.1494 2.16511 20.1165 2.31377 21.0609C2.33794 21.2182 2.41153 21.3638 2.52389 21.4765C2.63624 21.5892 2.78154 21.6633 2.93877 21.6879C3.8833 21.8365 4.85047 21.7239 5.73564 21.3624C6.62081 21.0009 7.39027 20.4042 7.96077 19.6369C8.02156 19.5582 8.06607 19.4681 8.09171 19.3719C8.11734 19.2758 8.12358 19.1755 8.11007 19.0769C8.09655 18.9783 8.06356 18.8834 8.013 18.7977C7.96244 18.712 7.89532 18.6372 7.81557 18.5777C7.73582 18.5181 7.64502 18.4751 7.54847 18.451C7.45191 18.4269 7.35153 18.4223 7.25318 18.4374C7.15482 18.4525 7.06045 18.4871 6.97557 18.539C6.89069 18.5909 6.81699 18.6592 6.75877 18.7399C6.41003 19.2089 5.95634 19.5898 5.43401 19.852C4.91168 20.1142 4.33522 20.2505 3.75077 20.2499C3.75077 19.0199 4.34277 17.9269 5.26077 17.2419Z"
                fill="#666666"
              />
            </svg>

            <p>{t("mession")}</p>
          </NavLink>
          <NavLink to="/minigame" className="mainNav__linkItem">
            <svg
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M11.25 5.337C11.25 4.982 11.064 4.661 10.849 4.378C10.6251 4.09137 10.5024 3.7387 10.5 3.375C10.5 2.339 11.507 1.5 12.75 1.5C13.993 1.5 15 2.34 15 3.375C15 3.744 14.872 4.088 14.651 4.378C14.436 4.661 14.25 4.982 14.25 5.337C14.25 5.669 14.528 5.935 14.86 5.915C16.77 5.801 18.65 5.573 20.492 5.239C20.5923 5.22081 20.6953 5.22327 20.7947 5.24623C20.894 5.26919 20.9876 5.31217 21.0698 5.37254C21.152 5.43291 21.221 5.5094 21.2726 5.59734C21.3242 5.68528 21.3574 5.78282 21.37 5.884C21.5963 7.69296 21.7218 9.5131 21.746 11.336C21.7469 11.4231 21.7305 11.5096 21.6977 11.5903C21.6649 11.671 21.6164 11.7444 21.555 11.8062C21.4936 11.868 21.4205 11.9169 21.34 11.9502C21.2595 11.9835 21.1731 12.0004 21.086 12C20.732 12 20.411 11.814 20.128 11.599C19.8414 11.3751 19.4887 11.2524 19.125 11.25C18.09 11.25 17.25 12.257 17.25 13.5C17.25 14.743 18.09 15.75 19.125 15.75C19.494 15.75 19.838 15.622 20.128 15.401C20.411 15.186 20.732 15 21.087 15C21.397 15 21.644 15.262 21.621 15.571C21.5037 17.1949 21.3051 18.8119 21.026 20.416C20.9995 20.5681 20.9267 20.7083 20.8175 20.8175C20.7083 20.9267 20.5681 20.9995 20.416 21.026C18.596 21.343 16.743 21.559 14.861 21.668C14.7822 21.6722 14.7033 21.6603 14.6293 21.633C14.5552 21.6057 14.4875 21.5635 14.4303 21.5091C14.3731 21.4547 14.3276 21.3893 14.2966 21.3167C14.2656 21.2441 14.2498 21.1659 14.25 21.087C14.25 20.732 14.436 20.411 14.651 20.128C14.872 19.838 15 19.494 15 19.125C15 18.09 13.993 17.25 12.75 17.25C11.507 17.25 10.5 18.09 10.5 19.125C10.5 19.494 10.628 19.838 10.849 20.128C11.064 20.411 11.25 20.732 11.25 21.087C11.2503 21.1728 11.2334 21.2578 11.2002 21.3369C11.1671 21.416 11.1184 21.4877 11.057 21.5477C10.9956 21.6076 10.9229 21.6547 10.843 21.686C10.7631 21.7173 10.6778 21.7323 10.592 21.73C9.0178 21.6855 7.44665 21.5654 5.884 21.37C5.78282 21.3574 5.68528 21.3242 5.59734 21.2726C5.5094 21.221 5.43291 21.152 5.37254 21.0698C5.31217 20.9876 5.26919 20.894 5.24623 20.7947C5.22327 20.6953 5.22081 20.5923 5.239 20.492C5.532 18.878 5.743 17.235 5.868 15.568C5.87323 15.4952 5.86337 15.4221 5.83903 15.3533C5.81468 15.2844 5.77638 15.2214 5.72653 15.1681C5.67668 15.1147 5.61634 15.0723 5.54931 15.0434C5.48228 15.0144 5.41 14.9997 5.337 15C4.982 15 4.661 15.186 4.378 15.401C4.088 15.622 3.744 15.75 3.375 15.75C2.339 15.75 1.5 14.743 1.5 13.5C1.5 12.257 2.34 11.25 3.375 11.25C3.744 11.25 4.088 11.378 4.378 11.599C4.661 11.814 4.982 12 5.337 12C5.42399 12.0004 5.51019 11.9835 5.59059 11.9503C5.67099 11.917 5.74397 11.8682 5.8053 11.8065C5.86663 11.7448 5.91507 11.6715 5.94781 11.5909C5.98055 11.5103 5.99693 11.424 5.996 11.337C5.97412 9.72613 5.87066 8.1174 5.686 6.517C5.67292 6.40475 5.68537 6.291 5.72242 6.18424C5.75948 6.07748 5.82018 5.98048 5.89999 5.90047C5.9798 5.82047 6.07666 5.75953 6.18333 5.72222C6.29 5.68491 6.40372 5.67219 6.516 5.685C7.859 5.84 9.219 5.939 10.593 5.979C10.6786 5.98128 10.7639 5.96634 10.8436 5.93507C10.9234 5.9038 10.996 5.85684 11.0573 5.79697C11.1186 5.7371 11.1672 5.66554 11.2003 5.58653C11.2334 5.50752 11.2503 5.42266 11.25 5.337Z"
                fill="#666666"
              />
            </svg>

            <p>Minigame</p>
          </NavLink>
        </div>
        <div className="mainNav__aside">
          <>
            <Link
              to="/information?filter=chat"
              // className="mainNav__notification"
            >
              <i className="mainNav__message">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="20"
                  height="20"
                  fill="none"
                  viewBox="0 0 24 24"
                >
                  <path
                    fill="#3D92D1"
                    fillRule="evenodd"
                    d="M4.848 2.771a49.319 49.319 0 0114.304-.001c1.978.292 3.348 2.024 3.348 3.97v6.02c0 1.946-1.37 3.678-3.348 3.97-1.154.17-2.313.297-3.476.383a.389.389 0 00-.297.17l-2.755 4.133a.751.751 0 01-1.248 0l-2.755-4.133a.39.39 0 00-.297-.17 48.895 48.895 0 01-3.476-.384c-1.978-.29-3.348-2.024-3.348-3.97V6.741c0-1.946 1.37-3.68 3.348-3.97zM6.75 8.25a.75.75 0 01.75-.75h9a.75.75 0 110 1.5h-9a.75.75 0 01-.75-.75zm.75 2.25a.75.75 0 100 1.5H12a.75.75 0 100-1.5H7.5z"
                    clipRule="evenodd"
                  ></path>
                </svg>
              </i>
            </Link>
            <Link to="/notification">
              <i className="mainNav__notification">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="20"
                  height="20"
                  fill="none"
                  viewBox="0 0 24 24"
                >
                  <path
                    fill="#3D92D1"
                    fillRule="evenodd"
                    d="M5.25 9a6.75 6.75 0 0113.5 0v.75c0 2.123.8 4.057 2.118 5.52a.75.75 0 01-.297 1.206c-1.544.57-3.16.99-4.831 1.243a3.749 3.749 0 11-7.48 0 24.585 24.585 0 01-4.831-1.244.75.75 0 01-.298-1.205A8.217 8.217 0 005.25 9.75V9zm4.502 8.9a2.25 2.25 0 104.496 0c-1.496.135-3 .135-4.496 0z"
                    clipRule="evenodd"
                  ></path>
                </svg>
              </i>
            </Link>

            <div className="mainNav__avatar">
              <NavLink to="/information">
                <img
                  src={require("../../assets/images/user.png")}
                  alt=""
                  width="30"
                  height="30"
                />
              </NavLink>
            </div>
          </>

          <div className="mainNav__Login">
            <NavLink to="/login">
              <span>{t("login")}</span>
            </NavLink>
          </div>

          <div className="mainNav__lang">
            <NavLink
              to="/?lang=vi"
              onClick={() => changeLanguage("vi")}
              className="mainNav__langLink"
            >
              VI
            </NavLink>
            <span>|</span>
            <NavLink
              to="/?lang=en"
              onClick={() => changeLanguage("en")}
              className="mainNav__langLink"
            >
              EN
            </NavLink>
          </div>
        </div>
      </div>
    </nav>
  );
};

export default MainNav;
